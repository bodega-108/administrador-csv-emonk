<div class="container mt-5">
    <h1 class="text-center" >Administrador SKU</h1>
    <div class="row d-flex justify-content-center">
            <button class="btn btn-primary col-sm-3 " (click)="activeSeccionCrear()" >Crear</button>
            <button class="btn btn-primary col-sm-3 ml-2" (click)="getAllSku()">Ver Todos los sku</button>
        
    </div>

    <div class="container mt-5" *ngIf="cargando">
        <div class="card">
            <div class="card-body">
                <div class="text-center">
                    <div class="spinner-border" role="status">
                      <span class="sr-only">Loading...</span>
                    </div>
                    <h5>Creando Sku...</h5>
                  </div>

            </div>
        </div>
    </div>

    <div class="container mt-5" *ngIf="!cargando || !seeAllSku">
        <form [formGroup]="form" (ngSubmit)="save($event)" *ngIf="!seeAllSku">
            <div class="form-group">
              <label for="exampleInputEmail1">Sku</label>
              <input type="text" formControlName="sku" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp">
            </div>
            <div class="alert alert-danger" role="alert"  *ngIf="form.get('sku').errors && form.get('sku').touched" >
                <p *ngIf="form.get('sku').hasError('required')">
                    Es un campo requerido
                  </p>
                  <p *ngIf="form.get('sku').hasError('maxlength')">
                    El maximo de caracteres permitido es 12
                  </p>
              </div> 
            
            <div class="form-group">
              <p>Categoria</p>
                <select class="form-control" formControlName="categoria">
                    <option>--Seleccione --</option>
                    <option>Agricola</option>
                    <option>Hogar</option>
                    <option>Deportes</option>
                    <option>Medica</option>
                    <option>Industrial</option>
                    <option>Materia Prima</option>
                    <option>Libreria</option>
                    <option>Bebe</option>
                    <option>Limpieza</option>
                  </select>
            </div>
            <div class="alert alert-danger" role="alert"  *ngIf="form.get('categoria').errors && form.get('categoria').touched" >
                <p *ngIf="form.get('categoria').hasError('required')">
                    Es un campo requerido
                  </p>
                 
              </div>
              <div class="alert alert-success" role="alert" *ngIf="skuCreado">
                El Sku se ha a√±adido con exito
              </div>
              <div class="alert alert-danger" role="alert" *ngIf="existente">
                El Sku ya esta registrado
              </div>
            <button type="submit" class="btn btn-success" [disabled]="form.invalid || existente">Guardar</button>
          </form>
    </div>
</div>
<!-- ==========================  Seccion ver todos los Sku ============================ -->
<div class="container mt-5" *ngIf="seeAllSku">
  <table class="table table-hover">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Sku</th>
        <th scope="col">Categoria</th>
        <th>Eliminar</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of arraySku">
        <th scope="row">{{item.sku}}</th>
        <td>{{item.categoria}}</td>
        <td><button class="btn btn-danger" (click)="deleteSku(item.sku)"><i class="fas fa-trash"></i></button> </td>
      </tr>
    </tbody>
  </table>
</div>